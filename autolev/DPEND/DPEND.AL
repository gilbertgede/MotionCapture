%---------------------------------------------------------------------%
%    FILE: DPEND.AL
%    DATE: JANUARY 6, 2009
%  AUTHOR: JASON MOORE
% PROBLEM: VERITCAL DOUBLE PENDULUM WITH A TORQUE
%   NOTES: 
%---------------------------------------------------------------------%
%         DEFAULT SETTINGS
%---------------------------------------------------------------------%

AUTOZ OFF
AUTORHS OFF
OVERWRITE ALL
BEEPSOUND OFF

%---------------------------------------------------------------------%
%         NEWTONIAN, BODIES, FRAMES, PARTICLES, POINTS
%---------------------------------------------------------------------%

% DECLARE THE INERTIAL REFERENCE FRAME

NEWTONIAN N

% DECLARE THE TWO BODIES

BODIES LOWER,UPPER

% DECLARE THE JOIN POINT

POINTS JOINT

%---------------------------------------------------------------------%
%         CONSTANTS AND VARIABLES
%---------------------------------------------------------------------%

CONSTANTS L{2},G
SPECIFIED T{2}

% DECLARE THE GENERALIZED COORDINATES
% Q1:
% Q2:

VARIABLES Q{2}'

%---------------------------------------------------------------------%
%         GENERALIZED SPEEDS
%---------------------------------------------------------------------%

MOTIONVARIABLES' U{2}'

%---------------------------------------------------------------------%
%         MASS AND INERTIA PROPERTIES
%---------------------------------------------------------------------%

MASS LOWER=M1,UPPER=M2
INERTIA LOWER,IL11,IL22,IL33,IL12,IL23,IL31
INERTIA UPPER,IU11,IU22,IU33,IU12,IU23,IU31

%---------------------------------------------------------------------%
%         ANGULAR RELATIONSHIPS                                       %
%---------------------------------------------------------------------%

SIMPROT(N,LOWER,3,Q1)
SIMPROT(LOWER,UPPER,3,Q2)

%---------------------------------------------------------------------%
%         POSITION VECTORS
%---------------------------------------------------------------------%

% LOCATE THE CENTER OF MASS FOR EACH BODY

P_NO_LOWERO>=L1/2*LOWER2>

P_NO_UPPERO>=L1*LOWER2>+L2/2*UPPER2>

%---------------------------------------------------------------------%
%         DEFINE THE GENERALIZED SPEEDS
%---------------------------------------------------------------------%

Q1'=U1
Q2'=U2

%---------------------------------------------------------------------%
%         ANGULAR VELOCITIES
%---------------------------------------------------------------------%

ANGVEL(N,LOWER)
ANGVEL(N,UPPER)

%---------------------------------------------------------------------%
%         VELOCITIES
%---------------------------------------------------------------------%

V_LOWERO_N>=DT(P_NO_LOWERO>,N)
V_UPPERO_N>=DT(P_NO_UPPERO>,N)

%---------------------------------------------------------------------%
%         ANGULAR ACCELERATIONS
%---------------------------------------------------------------------%

ALF_LOWER_N>=DT(W_LOWER_N>,N)

ALF_UPPER_N>=DT(W_UPPER_N>,N)

%---------------------------------------------------------------------%
%         ACCELERATIONS
%---------------------------------------------------------------------%

A_LOWERO_N>=DT(V_LOWERO_N>,N)
A_UPPERO_N>=DT(V_UPPERO_N>,N)

%---------------------------------------------------------------------%
%         FORCES AND TORQUES
%---------------------------------------------------------------------%

GRAVITY(-G*N2>,LOWER,UPPER)
TORQUE(LOWER/UPPER,T2*LOWER3>) % LEAN TORQUE

%---------------------------------------------------------------------%
%         EQUATIONS OF MOTION
%---------------------------------------------------------------------%

ZERO=FR()+FRSTAR()
SOLVE(ZERO,U1',U2')

%---------------------------------------------------------------------%
%         SAVE OUTPUT
%---------------------------------------------------------------------%

SAVE DPEND.ALL